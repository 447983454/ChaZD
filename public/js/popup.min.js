function queryInPopup(a){$input.select(),$queryResultContainer.classList.contains("unshow")&&$queryResultContainer.classList.remove("unshow"),$queryResultContainer.innerHTML="ψ(._. )>词典君正在翻译。。。",console.log("input value: "+$input.value),console.log("quertText: "+a),a?($input.value=a,chrome.extension.sendMessage({queryWord:a,source:"popup"},buildResult)):chrome.extension.sendMessage({queryWord:$input.value,source:"popup"},buildResult)}function buildVoice(a){var b=a.getAttribute("data-src");console.log("voice src: [] "+b);var c=document.createElement("audio");c.setAttribute("src",b),a.appendChild(c),c.addEventListener("ended",function(){console.log("loading src: "+this.getAttribute("src")),this.load()}),a.addEventListener("click",function(){console.log("playing src: "+c.getAttribute("src")),c.play()})}function createLink(a,b){a.addEventListener("click",function(){chrome.tabs.create({url:b})})}function totalHeight(a){for(var b=document.getElementsByClassName(a),c=b.length,d=0,e=0;c>e;e++)d+=b[e].scrollHeight;return d+10}var $button=document.querySelector("#search"),$tipsContainer=document.querySelector("#tips"),$input=document.querySelector("#query-word"),$queryResultContainer=document.querySelector("#query-result");-1!==window.navigator.platform.toLowerCase().indexOf("mac")&&(document.querySelector("#ctrl-option").firstChild.nodeValue="Command"),$tipsContainer.classList.contains("unshow")||$tipsContainer.classList.add("unshow");var buildResult=function(a){var b=a,c="";if("query success"==b.validMessage){c+=b.titleBlock,void 0!==b.basicBlock&&(c+=b.basicBlock),void 0!==b.webBlock&&(c+=b.webBlock),$queryResultContainer.innerHTML=c;var d,e,f=document.querySelectorAll(".voice-container");for(d=0,e=f.length;e>d;d++)buildVoice(f[d])}else $queryResultContainer.innerHTML=20==b.errorCode?"<p>这段文字太长，词典君无能为力了（┬_┬） <br><br>试试短一点的吧~</p>":40==b.errorCode?"<p>对不起，这段文字太高深了，请饶过词典君吧（┬_┬）</p>":"<p>词典君罢工啦（┬_┬）<br><br> 是不是网络不太好？<br><br> 稍后再试一次吧</p>"};$button.addEventListener("click",function(){queryInPopup()}),$input.select(),$input.addEventListener("keyup",function(a){13===a.keyCode&&queryInPopup()});var issue=document.querySelector("#issue"),email=document.querySelector("#email"),source=document.querySelector("#source"),keySet=document.querySelector("#key-set"),score=document.querySelector("#score");createLink(email,"mailto:ververcpp@gmail.com"),createLink(source,"https://github.com/ververcpp/ChaZD"),createLink(issue,"https://github.com/ververcpp/ChaZD/issues/new"),createLink(keySet,"chrome://extensions/configureCommands"),createLink(score,"https://chrome.google.com/webstore/detail/chazd/nkiipedegbhbjmajlhpegcpcaacbfggp"),document.querySelector("#setting-button").addEventListener("click",function(){var a=document.getElementById("settings");a.classList.toggle("active"),a.style.height=a.classList.contains("active")?blockHeight+"px":0});var blockHeight=totalHeight("top-menu")+totalHeight("sub-menu")+totalHeight("carved")+10,linkQuery=document.querySelector("#linkQuery"),noSelect=document.querySelector("#noSelect"),mouseSelect=document.querySelector("#mouseSelect"),useCtrl=document.querySelector("#useCtrl"),showPositionSide=document.querySelector("#showPositionSide"),showPositionNear=document.querySelector("#showPositionNear"),turnOffTips=document.querySelector("#turn-off-tips"),tips=document.querySelector("#tips"),toggleKey=document.querySelector("#toggle-key");chrome.storage.sync.get(null,function(a){""!==a.currentWord&&queryInPopup(a.currentWord),linkQuery.checked=a.linkQuery===!0?!0:!1,"noSelect"===a.selectMode&&(noSelect.checked=!0,toggleKey.disabled=!0),"mouseSelect"===a.selectMode&&(mouseSelect.checked=!0,toggleKey.disabled=!0),"useCtrl"===a.selectMode&&(useCtrl.checked=!0,toggleKey.disabled=!1),a.showTips&&tips.classList.remove("unshow"),"side"===a.showPosition?showPositionSide.checked=!0:"near"===a.showPosition&&(showPositionNear.checked=!0),"ctrl"===a.toggleKey?toggleKey.selectedIndex=0:"alt"===a.toggleKey?toggleKey.selectedIndex=1:"shift"===a.toggleKey&&(toggleKey.selectedIndex=2)}),linkQuery.addEventListener("click",function(){var a=linkQuery.checked;chrome.storage.sync.set({linkQuery:a},function(){console.log("[ChaZD] Success update settings linkQuery = "+a)})}),turnOffTips.addEventListener("click",function(){tips.classList.add("unshow"),chrome.storage.sync.set({showTips:!1},function(){console.log("[ChaZD] Success update settings showTips = false")})}),noSelect.addEventListener("click",function(){toggleKey.disabled=!0,chrome.storage.sync.set({selectMode:"noSelect"},function(){console.log("[ChaZD] Success update settings selectMode = noSelect")})}),mouseSelect.addEventListener("click",function(){toggleKey.disabled=!0,chrome.storage.sync.set({selectMode:"mouseSelect"},function(){console.log("[ChaZD] Success update settings selectMode = mouseSelect")})}),useCtrl.addEventListener("click",function(){console.log(toggleKey.disabled),toggleKey.disabled&&(toggleKey.disabled=!1),chrome.storage.sync.set({selectMode:"useCtrl"},function(){console.log("[ChaZD] Success update settings selectMode = useCtrl")})}),showPositionSide.addEventListener("click",function(){chrome.storage.sync.set({showPosition:"side"},function(){console.log("[ChaZD] Success update settings showPosition = side")})}),showPositionNear.addEventListener("click",function(){chrome.storage.sync.set({showPosition:"near"},function(){console.log("[ChaZD] Success update settings showPosition = near")})}),toggleKey.onchange=function(){chrome.storage.sync.set({toggleKey:this.checked},function(){console.log("[ChaZD] Success update settings toggleKey = "+this.checked)})};
//# sourceMappingURL=popup.min.js.map